
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Using a structural ROI &#8212; MarsBaR 0.45 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=ef544bf2"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial/andmore';</script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MarsBaR FAQ" href="../faq.html" />
    <link rel="prev" title="Basic results" href="results.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.45" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">MarsBaR 0.45 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About MarsBaR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download and install</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">MarsBaR tutorial</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html">The MarsBaR / SPM interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="define.html">Defining ROIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimate.html">Running the ROI analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="results.html">Basic results</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Using a structural ROI</a></li>


</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">MarsBaR FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../development/index.html">Reading and writing MarsBaR code</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/code.html">Getting the latest development code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/apidocs.html">API documentation</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/marsbar-toolbox/marsbar" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/marsbar-toolbox/marsbar/issues/new?title=Issue%20on%20page%20%2Ftutorial/andmore.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/tutorial/andmore.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Using a structural ROI</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Using a structural ROI</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-an-analysis-using-structural-rois">Running an analysis using structural ROIs</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#batch-mode">Batch mode</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-end">The end</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="using-a-structural-roi">
<h1>Using a structural ROI<a class="headerlink" href="#using-a-structural-roi" title="Link to this heading">#</a></h1>
<p>So far we have used a functional ROI. This has the advantage that it is
usually well tuned to the subject we are analysing. The disadvantages are that
we have had to use a whole run of data to define the ROI, which we would have
preferred to be able to analyze, and that functional ROIs can be noisy, when
the activation signal is not strong. An alternative is to use the anatomy of
the brain to estimate the location of functional areas.</p>
<p>Using anatomical ROIs can work well for areas that are naturally defined by
brain structure, such as the subcortical nuclei, or the primary sensory and
motor cortices, where the functional areas are closely linked to the position
of large and relatively invariant sulci. Outside these areas, it can be
difficult to define functional areas using anatomy alone. The problems are
compounded when anatomical ROIs are defined on one subject, and applied to
another, because there is great variability between subject in sulcal anatomy.</p>
<p>In the example experiment, subjects responded with a key-press each time
they saw the flashing checker board. We might therefore be interested to
know the level of activation in the putamen.  This would be a good
candidate for an anatomical ROI, because the putamen can be accurately
defined on a structural scan, and does not vary much between subjects
after spatial normalization. The AAL ROI library contains a definition
of the left and right putamen for a single subject after spatial
normalization. The images from our subject have been spatially
normalized, so the <a class="reference internal" href="../download.html#aal-rois"><span class="std std-ref">AAL structural ROIs</span></a> definition of the putamen will
probably give a reasonable approximation to the putamen in our data.</p>
<section id="running-an-analysis-using-structural-rois">
<h2>Running an analysis using structural ROIs<a class="headerlink" href="#running-an-analysis-using-structural-rois" title="Link to this heading">#</a></h2>
<p>is exactly the same as running the analysis with the functional
ROI. Select Design from the MarsBaR menu, and <em>Set design from
file</em>. Choose <code class="docutils literal notranslate"><span class="pre">sess1/SPM8_ana/SPM.mat</span></code>.  Click on Data, <em>Extract ROI
data (default)</em>. When you are asked for ROI file, navigate to the
MarsBaR <a class="reference internal" href="../download.html#example-data"><span class="std std-ref">Example dataset</span></a> directory, then to the <code class="docutils literal notranslate"><span class="pre">rois</span></code>
subdirectory, select <code class="docutils literal notranslate"><span class="pre">MNI_Putamen_L_roi.mat</span></code> and click Done. This is a
copy of one of the <a class="reference internal" href="../download.html#aal-rois"><span class="std std-ref">AAL structural ROIs</span></a>.  When the data extraction is done,
choose Results, <em>Estimate results</em> and wait till MarsBaR has done its
thing. Select Results, <em>Statistic table</em>, enter the <code class="docutils literal notranslate"><span class="pre">stim_hrf</span></code>
contrast, as shown in the figure above.  Repeat the same procedure,
using the copy of the AAL <code class="docutils literal notranslate"><span class="pre">MNI_Putamen_R_roi.mat</span></code> ROI. You will now
have two tables.</p>
<p>One table for the left putamen:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">Contrast</span><span class="w"> </span><span class="s">name</span><span class="w">    </span><span class="s">ROI</span><span class="w"> </span><span class="s">name:</span><span class="w"> </span><span class="s">Contrast</span><span class="w"> </span><span class="s">value:</span><span class="w">    </span><span class="s">t</span><span class="w"> </span><span class="s">statistic:</span><span class="w">  </span><span class="s">Uncorrected</span><span class="w"> </span><span class="s">P:</span><span class="w">    </span><span class="s">Corrected</span><span class="w"> </span><span class="s">P</span>
<span class="o">-----------------------------------------------------------------------------------------</span>

<span class="n">stim_hrf</span>
<span class="o">---------------------------</span>

<span class="w">                </span><span class="n">Putamen_L</span><span class="p">:</span><span class="w">           </span><span class="mf">0.08</span><span class="p">:</span><span class="w">           </span><span class="mf">0.77</span><span class="p">:</span><span class="w">       </span><span class="mf">0.222894</span><span class="p">:</span><span class="w">       </span><span class="mf">0.222894</span>
</pre></div>
</div>
<p>and one for the right putamen:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">Contrast</span><span class="w"> </span><span class="s">name</span><span class="w">    </span><span class="s">ROI</span><span class="w"> </span><span class="s">name:</span><span class="w"> </span><span class="s">Contrast</span><span class="w"> </span><span class="s">value:</span><span class="w">    </span><span class="s">t</span><span class="w"> </span><span class="s">statistic:</span><span class="w">  </span><span class="s">Uncorrected</span><span class="w"> </span><span class="s">P:</span><span class="w">    </span><span class="s">Corrected</span><span class="w"> </span><span class="s">P</span>
<span class="o">-----------------------------------------------------------------------------------------</span>

<span class="n">stim_hrf</span>
<span class="o">---------------------------</span>

<span class="w">                </span><span class="n">Putamen_R</span><span class="p">:</span><span class="w">           </span><span class="mf">0.05</span><span class="p">:</span><span class="w">           </span><span class="mf">0.50</span><span class="p">:</span><span class="w">       </span><span class="mf">0.307312</span><span class="p">:</span><span class="w">       </span><span class="mf">0.307312</span>
</pre></div>
</div>
<p>The subject responded with their right hand, so we expected that the right
putamen would have less signal than the left.</p>
</section>
</section>
<section id="batch-mode">
<h1>Batch mode<a class="headerlink" href="#batch-mode" title="Link to this heading">#</a></h1>
<p>You can also run MarsBaR in batch mode. There is an example batch script
in the <code class="docutils literal notranslate"><span class="pre">&lt;marsbar&gt;example/batch</span></code> directory, called
<code class="docutils literal notranslate"><span class="pre">run_tutorial.m</span></code>. You won’t be suprised to hear that this is a batch
script that runs most of the steps in this tutorial, as well as
extracting and plotting reconstructed event time courses.</p>
</section>
<section id="the-end">
<h1>The end<a class="headerlink" href="#the-end" title="Link to this heading">#</a></h1>
<p>That is the end of this short guided tour. We haven’t described the options
interface, but then again, it isn’t very interesting. As always, we would be
very grateful to hear about any mistakes in this document or bugs in MarsBaR.
You can find us on the MarsBaR mailing list - see <a class="reference internal" href="../support.html#support"><span class="std std-ref">Support</span></a>.</p>
<p>May your regions always be as interesting as you hoped.</p>
<p><em>The MarsBaRistas</em></p>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="results.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Basic results</p>
      </div>
    </a>
    <a class="right-next"
       href="../faq.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">MarsBaR FAQ</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Using a structural ROI</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-an-analysis-using-structural-rois">Running an analysis using structural ROIs</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#batch-mode">Batch mode</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-end">The end</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2000-2025, Matthew Brett.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>