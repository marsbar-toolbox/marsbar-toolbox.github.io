
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Getting started &#8212; MarsBaR 0.45 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=ef544bf2"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial/gettingstarted';</script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The MarsBaR / SPM interface" href="interface.html" />
    <link rel="prev" title="MarsBaR tutorial" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.45" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">MarsBaR 0.45 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About MarsBaR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download and install</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">MarsBaR tutorial</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html">The MarsBaR / SPM interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="define.html">Defining ROIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimate.html">Running the ROI analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="results.html">Basic results</a></li>
<li class="toctree-l2"><a class="reference internal" href="andmore.html">Using a structural ROI</a></li>


</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">MarsBaR FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../development/index.html">Reading and writing MarsBaR code</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/code.html">Getting the latest development code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/apidocs.html">API documentation</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/marsbar-toolbox/marsbar" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/marsbar-toolbox/marsbar/issues/new?title=Issue%20on%20page%20%2Ftutorial/gettingstarted.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/tutorial/gettingstarted.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Getting started</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-read-the-tutorial">How to read the tutorial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gearing-up">Gearing up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plan-of-campaign">Plan of campaign</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-a-functional-roi">Defining a functional ROI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functional-rois-usually-need-independent-data">Functional ROIs usually need independent data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-the-tutorial">Starting the tutorial</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">#</a></h1>
<section id="how-to-read-the-tutorial">
<h2>How to read the tutorial<a class="headerlink" href="#how-to-read-the-tutorial" title="Link to this heading">#</a></h2>
<p>There are three threads in this tutorial. The first and most obvious is
a step by step guide to running several standard ROI analyses.  On the
way, there are two sets of diversions. These are <em>interface summaries</em>,
and <em>technical notes</em>. Interface summaries look like this:</p>
<div class="interfacenote note admonition">
<p class="admonition-title">An interface summary</p>
<p>with some interface description</p>
</div>
<p>and technical notes look like this:</p>
<div class="technote note admonition">
<p class="admonition-title">A technical note</p>
<p>with some technical notes</p>
</div>
<p>If you just want to do the step-by-step tutorial, you can skip these
diversions, and come back to them later. The interface summaries give
you information on the range of things that MarsBaR can do; the
technical notes are detailed explanations of the workings of MarsBaR,
which can be useful in understanding the obscure parts of the
interface.</p>
</section>
<section id="gearing-up">
<h2>Gearing up<a class="headerlink" href="#gearing-up" title="Link to this heading">#</a></h2>
<p>To run all the examples in this tutorial you will need to download and install
two packages:</p>
<ol class="arabic simple">
<li><p>MarsBaR: this tutorial assumes marsbar version &gt;= 0.44;</p></li>
<li><p>the example dataset (version &gt;=0.3).</p></li>
</ol>
<p>To install these packages, see <a class="reference internal" href="../download.html#download-install"><span class="std std-ref">Download and install</span></a></p>
<p>This tutorial assumes you are using SPM8, but you can run the tutorial with
SPM versions 12, 8, 5, 2 or 99; the results will be very similar.</p>
</section>
<section id="plan-of-campaign">
<h2>Plan of campaign<a class="headerlink" href="#plan-of-campaign" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../download.html#example-data"><span class="std std-ref">Example dataset</span></a> is from an experiment with three EPI runs of
flashing checkerboard events.  The first run was at a high presentation
rate (average 1 per second), run 2 was at a medium rate (average 1 every
3 seconds) and run 3 was slow (1 every 10 seconds on average).</p>
<p>We are going to analyse the data to see if there is different activation for
fast and slow presentation rates. ROI analysis is an obvious choice here,
because we know where the activation is likely to be – in the primary visual
cortex – but we are more interested in how much activation there will be. So,
we will first need to define an ROI for the visual cortex, and then analyze the
data within the ROI.</p>
<p>In this tutorial we will cover two methods of defining an ROI: first, a
functional definition and second, an anatomical definition.</p>
</section>
<section id="defining-a-functional-roi">
<h2>Defining a functional ROI<a class="headerlink" href="#defining-a-functional-roi" title="Link to this heading">#</a></h2>
<p>A key problem in an ROI analysis is finding the right ROI. This is easier for
the visual cortex than for almost any other functional area, because the
location of the visual cortex is fairly well predicted by the calcarine sulcus,
in the occipital lobe, which is easy enough to define on a structural scan.
However, there is a moderate degree of individual variation in the size and
border of the primary visual cortex.</p>
<p>One approach to this problem is to use the subject’s own activation pattern to
define the ROI. We might ask the subject to do another visual task in the
scanner, and use SPM to detect the activated areas. We find the subject’s
primary visual cortex from the activation map, and use this functional ROI to
analyze other data from the same subject. This approach has been very fruitful
for areas such as the fusiform face area, which vary a great deal in position
between subjects.</p>
<p>For this dataset, we are most interested in the difference between the fast
presentation rates of run 1, and the slow presentation rates of run 3. So, we
can use an SPM analysis of run 2 to define the visual cortex, and use this as
an ROI for our analysis of run 1 and run 3.</p>
</section>
<section id="functional-rois-usually-need-independent-data">
<h2>Functional ROIs usually need independent data<a class="headerlink" href="#functional-rois-usually-need-independent-data" title="Link to this heading">#</a></h2>
<p>Using the recipe above, we are not using run 2 for the ROI analysis. Because
we will use run 2 to define the ROI, if we extract data from this ROI for run
2, it will be biased to be more activated than the data from run 1 and run 3.
Imagine that our experiment had not worked, and there was no real activation
in any of the runs. We do an SPM analysis on run 2, and drop the threshold to
find some voxels with higher signal than others due to noise. We define the
ROI using this noise cluster, and extract data from the ROI for this session,
and the other two sessions. The activation signal from the ROI in run 2 will
probably appear to be higher than for the other sessions, because we selected
these voxels beforehand to have high signal for run 2. The same argument
applies if we select the ROI from a truly activated area; the exact choice of
voxels will depend to some extent on the noise in this session, and so data
extracted from this ROI, for this session, will be biased to have high signal.</p>
</section>
<section id="starting-the-tutorial">
<span id="tutorial-processing"></span><h2>Starting the tutorial<a class="headerlink" href="#starting-the-tutorial" title="Link to this heading">#</a></h2>
<p>First you will need to run some processing on the example dataset. After
you unpack the dataset archive, you should have four subdirectories in
the main <code class="docutils literal notranslate"><span class="pre">marsbar_example_data</span></code> directory. Directories <code class="docutils literal notranslate"><span class="pre">sess1</span></code>,
<code class="docutils literal notranslate"><span class="pre">sess2</span></code> and <code class="docutils literal notranslate"><span class="pre">sess3</span></code> contain the slice-time corrected and realigned,
undistorted, spatially normalized data for the three sessions (runs) of
the experiment. The <code class="docutils literal notranslate"><span class="pre">rois</span></code> directory contains pre-defined regions of
interest.</p>
<p>To run the tutorial, find where your marsbar directory is. You can do
this from the matlab prompt with <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span> <span class="pre">which</span> <span class="pre">marsbar</span></code> . If <code class="docutils literal notranslate"><span class="pre">&lt;marsbar&gt;</span></code>
is the marsbar directory, then you should be able to see a directory
called <code class="docutils literal notranslate"><span class="pre">&lt;marsbar&gt;/examples/batch</span></code>. This <code class="docutils literal notranslate"><span class="pre">batch</span></code> subdirectory contains
Matlab program files to run the preprocessing. Change directory to
<code class="docutils literal notranslate"><span class="pre">batch</span></code>, and start Matlab.  From the Matlab prompt, run the command
<code class="docutils literal notranslate"><span class="pre">run_preprocess</span></code>. This little script will smooth the images by 8mm
FWHM, and run SPM models for each run.</p>
<p>Now start MarsBaR.  First, make sure the MarsBaR directory is on the Matlab
path.  If you are using the GUI to add marsbar to the path, add only the path
containing <code class="docutils literal notranslate"><span class="pre">marsbar.m</span></code>, but <em>not</em> the subdirectories in this directory.
Next, run the command <code class="docutils literal notranslate"><span class="pre">marsbar</span></code> from the Matlab <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> prompt.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">MarsBaR tutorial</p>
      </div>
    </a>
    <a class="right-next"
       href="interface.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The MarsBaR / SPM interface</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-read-the-tutorial">How to read the tutorial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gearing-up">Gearing up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plan-of-campaign">Plan of campaign</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-a-functional-roi">Defining a functional ROI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functional-rois-usually-need-independent-data">Functional ROIs usually need independent data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-the-tutorial">Starting the tutorial</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2000-2025, Matthew Brett.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>